
## 异型屏吸顶吸底框架
目前市面上的手机更新迭代速度快，水滴屏、刘海屏等各种异型屏手机横空出世，越来越大的屏幕，越来越独特的界面设计替换了规规矩矩的布局，作为前端开发者来说，这并不是一件好事。这些“异形”的出现意味着我们需要话费大量的精力在适配上，或者常常忘记了适配，造成功能遮挡或缺失，影响用户体验。

为了解决这一通用需求，我们决定做一个支持通用吸顶吸底，兼容各种异型屏的框架组件，用了这个组件你就不用为了这些兼容头疼，组件都会帮大家实现。本文就从这里展开 ~


### 这个组件解决了什么：
Ta 支持通用吸顶，吸底；兼容水滴屏、刘海屏等各种异型屏。
Ta 支持连续累加吸顶（目前支持2级）或连续覆盖吸顶。
Ta 可支持serviceWork或异常监控等。
Ta 可支持各页面统一添加特定模块或功能（如双十一导航）

一段简短的视频演示：（这里放视频）



接下来我们从以下几个方向解读一下我的思路：
### 基本功能 - 吸顶&吸底：
我要做什么？
吸顶，好，那么我会用到 `position:sticky`但是兼容性不是很好
让我们处理下兼容性：
```javascript
  // 是否支持某属性
  cssSupport (attr?: any, value?: any) {
    if (fixedMainDom && fixedMainDom.style && attr in fixedMainDom.style) {
      fixedMainDom.style[attr] = value
      fixedSubDom.style[attr] = value
      return fixedMainDom.style[attr] === value
    } else {
      return false
    }
  }

  initDome () {
    // 使用判断
    if (this.cssSupport('position', 'sticky')) {
      return
    } else {
      // do SomeThingA
    }
  }
  
```
接下来，不兼容的怎么处理，不吸顶了吗？
别忘了还可以使用 `position:fixed`,但是 `top` 是多少？
`top: 0` 糟糕，iphoneX的刘海屏还有那隐藏不掉的时间和信号任务栏，重!叠!了！
[这里是一张重叠的图]
吸顶吸底的界面兼容，不同的 `异形`，预留不同的顶部高度，也就是top值。
这里需要客户端的配合，获取任务栏的高度`TaskHeight`并提供给前端，这里不做赘述。

### 基本布局 - Slot实现：
这是一个组件，我要控制它的头部

### 连续吸顶，覆盖吸顶 - Dom跟随：
```javascript
  // 添加观察者
  addAbserve (target) {
    observe = new MutationObserver((mutations,observe) => {
      this.mainHeight = this.getTargetRect(abserveTarget).height
    })
    observe.observe(target, {childList: true, subtree: true})
  }
  // 移除观察者
  removeAbserve () {
    observe && observe.disconnect()
  }
```

### 头部内容 - 定制化自定义相结合：


### 滚动监听 - 节流防抖：

### 其他

### 实践
使用方法：

